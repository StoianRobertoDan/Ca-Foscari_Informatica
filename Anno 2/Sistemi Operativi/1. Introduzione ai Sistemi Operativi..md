
Cos'è un sistema operativo?
- Un sistema operativo è un software (programma) fondamentale che gestisce e controlla le risorse hardware e fornisce un'interfaccia tra l'utente e il computer. Inoltre controlla l'esecuzione di un insieme di applicazioni.
- I sistemi operativi sono macchine estese:
	- Principio di mascheramento: nasconde tutti i dettagli del calcolatore e delle sue operazioni e rende indipendente dall'hardware.
	- Principio di trasparenza : presenta all'utente una macchina virtuale facile da usare.
- I sistemi operativi sono gestori di risorse: ogni programma richiede tempo per usare le risorse e spazio delle risorse.

Gestione delle risorse:
- Il sistema operativo controlla l'allocazione e l'uso delle risorse hardware, come la CPU, la memoria, il disco rigido, la stampante e altri dispositivi. Questo impedisce che più programmi o processi accedano simultaneamente alle stesse risorse, evitando conflitti e garantendo un utilizzo efficiente delle risorse disponibili.
Interfaccia utente:
- Il sistema operativo offre un'interfaccia tra l'utente e il computer. Questa interfaccia può essere una riga di comando testuale (come in DOS), un'interfaccia grafica utente (GUI) (come in Windows, macOS o Linux), o addirittura un'interfaccia basata su voce (come Siri di Apple o Cortana di Microsoft). L'interfaccia utente consente agli utenti di comunicare con il computer e di eseguire applicazioni in modo intuitivo.
Gestione dei file:
- Il sistema operativo gestisce i file e le directory sul disco rigido o su altri dispositivi di archiviazione. Fornisce funzioni per la creazione, la lettura, la scrittura e l'eliminazione dei file, oltre a organizzare i file in una struttura gerarchica.
Controllo dei processi:
- Il sistema operativo gestisce i processi o i programmi in esecuzione sul computer. Controlla l'allocazione di risorse, la priorità dei processi e la sincronizzazione tra di essi per garantire un funzionamento stabile del sistema.


Modalità di esecuzione:
- Modalità utente: forza ad avere meno accesso alla memoria e alle informazioni del sistema in modo da impedire problemi di sicurezza.
- Modalità nucleo (o kernel): modalità di esecuzione con più accesso e poteri di amministrazione (il SO è prevalentemente in questa modalità).

Sistemi operativi Batch: programmi e dati caricati in sequenza ed eseguiti a lotti (batch).

Multiprogrammazione:
- Elaborazione di più job contemporaneamente.
- Un job può usare il processore mentre altri job usano unità periferiche.
- Timesharing:
	- La CPU è divisa in quanti di tempo.
	- I job vengono caricati per un determinato tempo (quanto) nella CPU. Ogni quanto di tempo lavora su un job diverso.
	- Permette di dare l'impressione a più utenti/terminali di avere l'intero sistema dedicato.
	- Gesione del processore:
		- Scheduling (decisione dell'ordine) del processore.
	- Gestione della memoria:
		- Memoria virtuale (aumenta la sicurezza delle applicazioni).
- Real-time system:
	- Sistemi che forniscono una risposta entro un determinato periodo di tempo.ù
	- Usato da tecnologie che hanno bisogno di risposte in tempo reale es. macchine con guida autonoma, gestione di traffico aereo ecc.
	- Lo Scheduler è critico ed essenziale.

Sistemi distribuiti e paralleli:
- Paralleli:
	- Sistema con un insieme ampio di unita di elaborazione.
	- Accoppiamento stretto e comunicazione molto rapida.
	- Condivisione delle risorse come la memoria.
	- Alta affidabilità e prestazioni.
- Distribuiti:
	- Sistema costituito da insieme di unità di elaborazione complete che interagiscono e cooperano tra di loro (attraverso delle linee di comunicazione).
	- Distanza maggiore tra le unità e comunicazione più lenta.
	- Omogenei o eterogenei.
	- Condivisione di risorse, prestazioni, affidabilità e trasparenza.

Componenti dei sistemi operativi:
- Le componenti principali dei sistemi operativi sono:
	- Scheduler dei processi: determina quando e per quanto un processo rimane in esecuzione su un certo processore.
	- Gestore della memoria: determina quando e quanta memoria allocare ai processi e cosa fare quando non c'è più spazio nella memoria principale.
	- Gestore dei dispositivi I/O: soddisfa le richieste di I/O da e verso i dispositivi hardware.
	- Gestore dell'inteprocess communication (IPC): permette ai processi di comunicare tra loro.
	- Gestore del file system: organizza raccolte di dati su dispositivi di memorizzazione e fornisce un'interfaccia per accedere a tali dati.
- Il processore è una componente hardware che esegue i programmi scritti in linguaggio macchina ed è diviso in:
	- CPU: esegue le istruzioni di un programma.
		- Multithreading:
			- Una CPU può tenere lo stato di 2 thread con scampio entro 1 nano-secondo
		- Multi-Core:
			- Più processori completi (core) su uno stesso chip:
				- Possono avere la memoria L2 in comune o ogni core avere la propria.
	- Coprocessore: esegue le istruzioni per usi speciali.
	- Registri: la memoria ad alta velocità su cui la CPU lavora:
		- I dati devono essere caricati dalla memoria principale ai registri per essere usati.
		- La memoria che contiene i registri è situata nel processore.
	- Tempo di elaborazione si misura in cicli (un oscillazione completa di un segnale elettrico):
		- La velocità del processore si misura in GHz (miliardi di cicli al secondo).
		- Prestazioni: $T = N_i/IPS$ ; $IPS = F\times IPC = F/CPI$
			- $T$ = tempo di esecuzione.
			- $N_i$ = numero di istruzioni di un programma.
			- $IPS$ = numero di istruzioni per secondo.
			- $F$ = frequenza del processore.
			- $IPC$ = numero di istruzioni per ciclo di clock.
			- $CPI$ = cicli di clock per istruzione.
		- T può migliorare:
			- Aumentando F (miniaturizzazione).
			- Riducendo $N_i$ (Complex/Reduced Instruction Set).
			- Aumentando IPC / riducendo CPI (pipeline o CPU superscalare).
				- ![[Pasted image 20231103182110.png]]
- Memoria:
	- Gerarchia di memoria per bilanciare costi/capacità/velocità:
		- ![[Pasted image 20231103184039.png]]
	- Registri:
		- Sono interni alla CPU (nessun ritardo ci accesso).
		- Capacità limitata:
			- 32x32bit per CPU a 32bit.
			- 64x64bit per CPU a 64bit.
	- Cache (usata per migliorare le prestazioni):
		- Livelli:
			- L1: interno al Core (es. 16KB).
			- L2: interno alla CPU (es. MB).
		- Progettazione complessa:
			- Dimensione.
			- Quando/dove inserire dati in Cache.
			- Politiche di rimozione dalla Cache.
	- Memoria principale:
		- RAM (Random Access Memory):
			- Volatile con accesso diretto.
			- DRAM (Dinamica): richiede l'aggiornamento del circuito.
			- SRAM (Statica): non richiede l'aggiornamento del circuito.
			- Larghezza di banda: quanti dati possono essere trasferiti per unità di tempo.
		- ROM (Read Only Memory):
			- Non volatile e (generalmente) non modificabile.
			- Veloce ed economica.
			- Progettata dal costruttore per contenere Firmware, Bios e *utility* necessari nella fase di avvio.
		- EEPROM (Electrical Erasable):
			- Memoria Flash.
			- Non volatile e riscrivibile.
			- Molto più lenta della RAM.
	- Memoria Secondaria:
		- Usata per immagazzinare grandi quantità di dati.
		- Non volatile e riscrivibile.
		- Basso costo ma molto lenti.
	- Dischi:
		- Dispositivi con interfaccia semplice.
		- Ha un "Controllore" (Driver) che si interfaccia con i diversi S.O. con cui può lavorare.
		- Possibilità di usarli in maniera Plug-And-Play.a
		- **Gestione I/O**:
			- Busy waiting:
				- Chiamata del sistema.
				- Chiamata al Driver.
				- Avvio I/O.
				- Attesa attiva di fine I/O.
			- Interrupt:
				- Avvio I/O.
				- Attesa interruzione del dispositivo a fine I/O.
				- Driver genera interruzione di I/O.
				- Si selezione il corrispondente gestore dell'I/O.
			- DMA (Direct Memory Access):
				- Hardware particolare che gestisce certi dispositivi I/O al posto della CPU (che comunque rimane libero di eseguire le istruzioni SW).
				- Le periferiche e i controllori gestiscono direttamente i dati da e verso la memoria.
				- Il DMA usa un controllore I/O per gestire i trasferimenti di dati.
				- Migliora le prestazioni del sistema in caso di elevato numero di operazioni I/O).
	- Bus: insieme di tracce.
		- Le **tracce** sono sottili collegamenti elettrici che trasportano informazioni tra dispositivi hardware.
			- La velocità è misurata in MHz.
		- Le **porte** sono bus che collegano solo 2 dispositivi.
		- I **canali I/O** sono bus condivisi da diversi dispositivi.
			- Gestisce I/O indipendentemente dalla CPU del sistema.
		- Tipi di Bus:
			- **PCIe** (Pheripheal Component Interconnect Express):
				- Collega la CPU ai dispositivi.
				- Velocita che raggiungono i 64 Gb/s.
			- **AGP** (Accelerated Graphics Port):
				- Collegamento per le schede grafiche.
			- **DMI** (Direct Media Interface).
			- **SATA** (Serial Advanced Technology Attachment).
			- **USB** (Universal Serial Bus):
				- Plug and Play.
				- Nato come connettore per dispositivi lenti.
			- **SCSI** (Small Computer System Interface).
		- ![[Pasted image 20231103230056.png]]
		- ![[Pasted image 20231103230118.png]]

Tipi e scopi dei S.O.
- S.O. per Mainframe:
	- Grandi capacità di I/O.
	- Servizi: Batch, transazioni, time-sharing.
- S.O. per Server:
	- Molti utenti.
	- Servizi: archiviazione, web server, ISP.
- S.O. per Multiprocessore:
	- Molte CPU.
	- Computer paralleli.
	- Comunicazione, coerenza, connessione.
- S.O. per PC:
	- Un solo utente.
	- Multiprogrammazione.
- S.O. per Palmari (PDA):
	- CPU multicore, fotocamera, sensori, GPS, molte app.
- S.O. integrati (embedded):
	- Per sistemi di calcolo con accezione generale.
	- Controllo di dispositivi (es. tv, autoveicoli, lettori mp3).
	- Sw su ROM.
- S.O. per Sensori.
- S.O. per Real-Time:
	- Obiettivi con scadenza (deadline).
	- Hard Real-Time o Soft Real-Time.
- S.O. per Smart Card:
	- Es. pagamenti elettronici, trasporti, amministrativi.

Le architetture:
- Includono:
	- Caratteristiche che svolgono funzioni in modo più rapido dal Hardware per migliorare le prestazioni.
	- Caratteristiche che consentono di far rispettare rigidamente la protezione.
- Meccanismi di protezione:
	- Impedire ai processi di accedere ad aree di memoria non proprie o istruzioni privilegiate.
	- Modalità di esecuzione dei sistema operativo:
		- Modalità utente (stato utente):
			- L'utente può eseguire solo un sottoinsieme di istruzioni.
		- Modalità Kernel (stato supervisore):
			- Il processore può accedere alle istruzioni e alle risorse privilegiate per conto dei processi.
	- Principio di privilegio minimo:
		- Dare ad ogni utente i minimi privilegi e accessi.
	- Protezione della memoria:
		- Bisogna evitare che i processi accedano ad aree di memoria non assegnate ad essi.
		- Si può evitare utilizzando registri del processore modificabili solo da istruzioni privilegiate.
- Interruzioni ed eccezioni:
	- La maggior parte dei dispositivi avviano un segnale chiamato **interrupt** al processore quando accadono certi eventi.
	- Le **eccezioni*** sono **interrupt** generati in risposta ad errori.
	- Il S.O. può rispondere ad un interrupt notificando i processi che sono in attesa di tali eventi.
	- Timer:
		- I S.O. usano un timer ad intervalli che genera periodicamente un segnale di interrupt per evitare che un processo monopolizzi il processore.
	- Clocks:
		- Forniscono una misura di continuità e permette al S.O. di determinare il tempo e la data corrente.
- Bootstrapping:
	- caricamento della memoria di componenti del sistema operativo iniziali.
	- Eseguita dal Basic I/O System (BIOS):
		- Inizializza l'hardware del sistema.
		- Carica le istruzioni in memoria principale da una regione di memoria secondaria chiamata "*settore di avvio*" (boot).
	- Se il sistema non è caricato, l'utente non può accedere ad alcuna componente hardware del computer.
	- Evoluzione:
		- EFI (Extensible Firmware Interface) ha un interfaccia testuale (shell) e driver. L'utente così può accedere ai dispositivi, dischi rigidi e rete.
	- ![[Pasted image 20231105192549.png]]
- Processo: programma in esecuzione. Ha:
	- spazio degli indirizzi.
	- Insieme di risorse (registri, file, segnali).
	- Descrittore dei processi.
	- UID (identificatore unico di utente):
		- Ogni processo ha un UID.
	- Tabella di processo.
	- Probabilità di creare processi figli.
	-  m 